/*! For license information please see index.js.LICENSE.txt */
!function(e,t){if("object"===typeof exports&&"object"===typeof module)module.exports=t(require("@sendo/app"),require("@sendo/storage"),require("@sendo/utils"),require("react"));else if("function"===typeof define&&define.amd)define(["@sendo/app","@sendo/storage","@sendo/utils","react"],t);else{var r="object"===typeof exports?t(require("@sendo/app"),require("@sendo/storage"),require("@sendo/utils"),require("react")):t(e["@sendo/app"],e["@sendo/storage"],e["@sendo/utils"],e.react);for(var o in r)("object"===typeof exports?exports:e)[o]=r[o]}}(globalThis,((e,t,r,o)=>(()=>{var n={8285:(e,t,r)=>{var o=r(3631)(r(8298),"DataView");e.exports=o},6174:(e,t,r)=>{var o=r(519),n=r(2238),a=r(367),s=r(1698),i=r(2698);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=s,u.prototype.set=i,e.exports=u},6283:(e,t,r)=>{var o=r(9682),n=r(2047),a=r(5606),s=r(7701),i=r(8953);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=s,u.prototype.set=i,e.exports=u},6402:(e,t,r)=>{var o=r(3631)(r(8298),"Map");e.exports=o},6506:(e,t,r)=>{var o=r(8604),n=r(7239),a=r(2668),s=r(7846),i=r(2008);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=s,u.prototype.set=i,e.exports=u},4122:(e,t,r)=>{var o=r(3631)(r(8298),"Promise");e.exports=o},3402:(e,t,r)=>{var o=r(3631)(r(8298),"Set");e.exports=o},5516:(e,t,r)=>{var o=r(6506),n=r(2709),a=r(5729);function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new o;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=n,s.prototype.has=a,e.exports=s},4512:(e,t,r)=>{var o=r(6283),n=r(6433),a=r(2359),s=r(4774),i=r(4589),u=r(4972);function c(e){var t=this.__data__=new o(e);this.size=t.size}c.prototype.clear=n,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=i,c.prototype.set=u,e.exports=c},2482:(e,t,r)=>{var o=r(8298).Symbol;e.exports=o},5277:(e,t,r)=>{var o=r(8298).Uint8Array;e.exports=o},5433:(e,t,r)=>{var o=r(3631)(r(8298),"WeakMap");e.exports=o},6893:e=>{e.exports=function(e,t){for(var r=-1,o=null==e?0:e.length,n=0,a=[];++r<o;){var s=e[r];t(s,r,e)&&(a[n++]=s)}return a}},4863:(e,t,r)=>{var o=r(5405),n=r(2570),a=r(5877),s=r(1308),i=r(6645),u=r(2197),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),p=!r&&n(e),l=!r&&!p&&s(e),f=!r&&!p&&!l&&u(e),v=r||p||l||f,d=v?o(e.length,String):[],_=d.length;for(var h in e)!t&&!c.call(e,h)||v&&("length"==h||l&&("offset"==h||"parent"==h)||f&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||i(h,_))||d.push(h);return d}},6773:e=>{e.exports=function(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}},70:e=>{e.exports=function(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1}},8083:(e,t,r)=>{var o=r(1046);e.exports=function(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}},1460:(e,t,r)=>{var o=r(6773),n=r(5877);e.exports=function(e,t,r){var a=t(e);return n(e)?a:o(a,r(e))}},8329:(e,t,r)=>{var o=r(2482),n=r(9961),a=r(3149),s=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?n(e):a(e)}},7230:(e,t,r)=>{var o=r(8329),n=r(5009);e.exports=function(e){return n(e)&&"[object Arguments]"==o(e)}},6408:(e,t,r)=>{var o=r(8865),n=r(5009);e.exports=function e(t,r,a,s,i){return t===r||(null==t||null==r||!n(t)&&!n(r)?t!==t&&r!==r:o(t,r,a,s,e,i))}},8865:(e,t,r)=>{var o=r(4512),n=r(6828),a=r(1982),s=r(9731),i=r(116),u=r(5877),c=r(1308),p=r(2197),l="[object Arguments]",f="[object Array]",v="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,_,h,b){var y=u(e),x=u(t),g=y?f:i(e),j=x?f:i(t),A=(g=g==l?v:g)==v,m=(j=j==l?v:j)==v,O=g==j;if(O&&c(e)){if(!c(t))return!1;y=!0,A=!1}if(O&&!A)return b||(b=new o),y||p(e)?n(e,t,r,_,h,b):a(e,t,g,r,_,h,b);if(!(1&r)){var S=A&&d.call(e,"__wrapped__"),E=m&&d.call(t,"__wrapped__");if(S||E){var w=S?e.value():e,k=E?t.value():t;return b||(b=new o),h(w,k,r,_,b)}}return!!O&&(b||(b=new o),s(e,t,r,_,h,b))}},865:(e,t,r)=>{var o=r(8842),n=r(2850),a=r(2015),s=r(6257),i=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,l=c.hasOwnProperty,f=RegExp("^"+p.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||n(e))&&(o(e)?f:i).test(s(e))}},5860:(e,t,r)=>{var o=r(8329),n=r(9294),a=r(5009),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&n(e.length)&&!!s[o(e)]}},9213:(e,t,r)=>{var o=r(4123),n=r(5154),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!o(e))return n(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},5405:e=>{e.exports=function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}},7520:e=>{e.exports=function(e){return function(t){return e(t)}}},3630:e=>{e.exports=function(e,t){return e.has(t)}},9696:(e,t,r)=>{var o=r(8298)["__core-js_shared__"];e.exports=o},6828:(e,t,r)=>{var o=r(5516),n=r(70),a=r(3630);e.exports=function(e,t,r,s,i,u){var c=1&r,p=e.length,l=t.length;if(p!=l&&!(c&&l>p))return!1;var f=u.get(e),v=u.get(t);if(f&&v)return f==t&&v==e;var d=-1,_=!0,h=2&r?new o:void 0;for(u.set(e,t),u.set(t,e);++d<p;){var b=e[d],y=t[d];if(s)var x=c?s(y,b,d,t,e,u):s(b,y,d,e,t,u);if(void 0!==x){if(x)continue;_=!1;break}if(h){if(!n(t,(function(e,t){if(!a(h,t)&&(b===e||i(b,e,r,s,u)))return h.push(t)}))){_=!1;break}}else if(b!==y&&!i(b,y,r,s,u)){_=!1;break}}return u.delete(e),u.delete(t),_}},1982:(e,t,r)=>{var o=r(2482),n=r(5277),a=r(1046),s=r(6828),i=r(4515),u=r(4969),c=o?o.prototype:void 0,p=c?c.valueOf:void 0;e.exports=function(e,t,r,o,c,l,f){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!l(new n(e),new n(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=i;case"[object Set]":var d=1&o;if(v||(v=u),e.size!=t.size&&!d)return!1;var _=f.get(e);if(_)return _==t;o|=2,f.set(e,t);var h=s(v(e),v(t),o,c,l,f);return f.delete(e),h;case"[object Symbol]":if(p)return p.call(e)==p.call(t)}return!1}},9731:(e,t,r)=>{var o=r(8118),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,s,i){var u=1&r,c=o(e),p=c.length;if(p!=o(t).length&&!u)return!1;for(var l=p;l--;){var f=c[l];if(!(u?f in t:n.call(t,f)))return!1}var v=i.get(e),d=i.get(t);if(v&&d)return v==t&&d==e;var _=!0;i.set(e,t),i.set(t,e);for(var h=u;++l<p;){var b=e[f=c[l]],y=t[f];if(a)var x=u?a(y,b,f,t,e,i):a(b,y,f,e,t,i);if(!(void 0===x?b===y||s(b,y,r,a,i):x)){_=!1;break}h||(h="constructor"==f)}if(_&&!h){var g=e.constructor,j=t.constructor;g==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof j&&j instanceof j||(_=!1)}return i.delete(e),i.delete(t),_}},3476:(e,t,r)=>{var o="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=o},8118:(e,t,r)=>{var o=r(1460),n=r(9939),a=r(5482);e.exports=function(e){return o(e,a,n)}},2541:(e,t,r)=>{var o=r(4248);e.exports=function(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}},3631:(e,t,r)=>{var o=r(865),n=r(9958);e.exports=function(e,t){var r=n(e,t);return o(r)?r:void 0}},9961:(e,t,r)=>{var o=r(2482),n=Object.prototype,a=n.hasOwnProperty,s=n.toString,i=o?o.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),r=e[i];try{e[i]=void 0;var o=!0}catch(e){}var n=s.call(e);return o&&(t?e[i]=r:delete e[i]),n}},9939:(e,t,r)=>{var o=r(6893),n=r(4157),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(e){return null==e?[]:(e=Object(e),o(s(e),(function(t){return a.call(e,t)})))}:n;e.exports=i},116:(e,t,r)=>{var o=r(8285),n=r(6402),a=r(4122),s=r(3402),i=r(5433),u=r(8329),c=r(6257),p="[object Map]",l="[object Promise]",f="[object Set]",v="[object WeakMap]",d="[object DataView]",_=c(o),h=c(n),b=c(a),y=c(s),x=c(i),g=u;(o&&g(new o(new ArrayBuffer(1)))!=d||n&&g(new n)!=p||a&&g(a.resolve())!=l||s&&g(new s)!=f||i&&g(new i)!=v)&&(g=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,o=r?c(r):"";if(o)switch(o){case _:return d;case h:return p;case b:return l;case y:return f;case x:return v}return t}),e.exports=g},9958:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},519:(e,t,r)=>{var o=r(3141);e.exports=function(){this.__data__=o?o(null):{},this.size=0}},2238:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},367:(e,t,r)=>{var o=r(3141),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(o){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(t,e)?t[e]:void 0}},1698:(e,t,r)=>{var o=r(3141),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return o?void 0!==t[e]:n.call(t,e)}},2698:(e,t,r)=>{var o=r(3141);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this}},6645:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var o=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==o||"symbol"!=o&&t.test(e))&&e>-1&&e%1==0&&e<r}},4248:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},2850:(e,t,r)=>{var o=r(9696),n=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!n&&n in e}},4123:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},9682:e=>{e.exports=function(){this.__data__=[],this.size=0}},2047:(e,t,r)=>{var o=r(8083),n=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=o(t,e);return!(r<0)&&(r==t.length-1?t.pop():n.call(t,r,1),--this.size,!0)}},5606:(e,t,r)=>{var o=r(8083);e.exports=function(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}},7701:(e,t,r)=>{var o=r(8083);e.exports=function(e){return o(this.__data__,e)>-1}},8953:(e,t,r)=>{var o=r(8083);e.exports=function(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},8604:(e,t,r)=>{var o=r(6174),n=r(6283),a=r(6402);e.exports=function(){this.size=0,this.__data__={hash:new o,map:new(a||n),string:new o}}},7239:(e,t,r)=>{var o=r(2541);e.exports=function(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}},2668:(e,t,r)=>{var o=r(2541);e.exports=function(e){return o(this,e).get(e)}},7846:(e,t,r)=>{var o=r(2541);e.exports=function(e){return o(this,e).has(e)}},2008:(e,t,r)=>{var o=r(2541);e.exports=function(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},4515:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,o){r[++t]=[o,e]})),r}},3141:(e,t,r)=>{var o=r(3631)(Object,"create");e.exports=o},5154:(e,t,r)=>{var o=r(4801)(Object.keys,Object);e.exports=o},3377:(e,t,r)=>{e=r.nmd(e);var o=r(3476),n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,s=a&&a.exports===n&&o.process,i=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=i},3149:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4801:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},8298:(e,t,r)=>{var o=r(3476),n="object"==typeof self&&self&&self.Object===Object&&self,a=o||n||Function("return this")();e.exports=a},2709:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5729:e=>{e.exports=function(e){return this.__data__.has(e)}},4969:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},6433:(e,t,r)=>{var o=r(6283);e.exports=function(){this.__data__=new o,this.size=0}},2359:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},4774:e=>{e.exports=function(e){return this.__data__.get(e)}},4589:e=>{e.exports=function(e){return this.__data__.has(e)}},4972:(e,t,r)=>{var o=r(6283),n=r(6402),a=r(6506);e.exports=function(e,t){var r=this.__data__;if(r instanceof o){var s=r.__data__;if(!n||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(s)}return r.set(e,t),this.size=r.size,this}},6257:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},1046:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},2570:(e,t,r)=>{var o=r(7230),n=r(5009),a=Object.prototype,s=a.hasOwnProperty,i=a.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(e){return n(e)&&s.call(e,"callee")&&!i.call(e,"callee")};e.exports=u},5877:e=>{var t=Array.isArray;e.exports=t},9477:(e,t,r)=>{var o=r(8842),n=r(9294);e.exports=function(e){return null!=e&&n(e.length)&&!o(e)}},1308:(e,t,r)=>{e=r.nmd(e);var o=r(8298),n=r(458),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,i=s&&s.exports===a?o.Buffer:void 0,u=(i?i.isBuffer:void 0)||n;e.exports=u},9399:(e,t,r)=>{var o=r(9213),n=r(116),a=r(2570),s=r(5877),i=r(9477),u=r(1308),c=r(4123),p=r(2197),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||p(e)||a(e)))return!e.length;var t=n(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!o(e).length;for(var r in e)if(l.call(e,r))return!1;return!0}},3951:(e,t,r)=>{var o=r(6408);e.exports=function(e,t){return o(e,t)}},8842:(e,t,r)=>{var o=r(8329),n=r(2015);e.exports=function(e){if(!n(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},9294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},2015:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5009:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2197:(e,t,r)=>{var o=r(5860),n=r(7520),a=r(3377),s=a&&a.isTypedArray,i=s?n(s):o;e.exports=i},5482:(e,t,r)=>{var o=r(4863),n=r(9213),a=r(9477);e.exports=function(e){return a(e)?o(e):n(e)}},4157:e=>{e.exports=function(){return[]}},458:e=>{e.exports=function(){return!1}},1859:(e,t,r)=>{"use strict";var o=r(8156),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var o,a={},c=null,p=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(p=t.ref),t)s.call(t,o)&&!u.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:c,ref:p,props:a,_owner:i.current}}t.Fragment=a,t.jsx=c},8024:(e,t,r)=>{"use strict";e.exports=r(1859)},3435:t=>{"use strict";t.exports=e},3939:e=>{"use strict";e.exports=t},2171:e=>{"use strict";e.exports=r},8156:e=>{"use strict";e.exports=o}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={id:e,loaded:!1,exports:{}},o=!0;try{n[e](r,r.exports,s),o=!1}finally{o&&delete a[e]}return r.loaded=!0,r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{"use strict";s.r(i),s.d(i,{default:()=>A});var e=s(3435),t=s(3939);const r={authenticationEmbedActions:(0,t.registerActions)({reducerName:"AuthenticationEmbed",handlers:{},thunkers:function(e){return{resetSession:()=>async(e,t,r)=>{e("PartnerAuth","logout",{callback:()=>{e("EmbedAppStorage","set",{key:"EBA_LOGIN_TOKEN",value:""}),e("EmbedAppStorage","set",{key:"EBA_USER_SESSION",value:""}),e("EmbedAppStorage","set",{key:"EBA_PARTNER_ACCESS_TOKEN",value:""}),e("EmbedAppStorage","set",{key:"EBA_AUTH_EXTRA_DATA",value:""}),e("User","reset"),e("PartnerAuth","reset"),e("PartnerAuth","setIsReady",{value:!0})}})}}}})};var o=s(8024),n=s(8156),a=s(9399),u=s.n(a),c=s(3951),p=s.n(c),l=s(2171);const f="EBA_LOGIN_TOKEN",v="EBA_USER_SESSION",d="EBA_AUTH_EXTRA_DATA";const _=e=>{const t=l.qs.parse(decodeURIComponent(e)),r={};for(const e in t)if(e.includes("__")){const[o,n]=e.split("__");t[e]&&(r[o]=r[o]||{},r[o][n]=t[e])}return r};function h(){const r=(0,n.useRef)(!1),o=(0,n.useRef)(""),a=(0,n.useRef)(),[s,i]=(0,n.useState)(!0),c=(0,t.useDispatch)(),h=(0,e.usePage)(),b=function(){const[r]=(0,e.useCookies)(),o=(0,t.useDispatch)(),a=(0,t.useSelector)("EmbedAppStorage").toJS()||{},s=(0,n.useCallback)(((e,t)=>{var o;const n=e||r[f]||a[f];var s;const i=null!==(s=r[v])&&void 0!==s?s:a[v];var u;const c=null!==(u=null!==t&&void 0!==t?t:r[d])&&void 0!==u?u:a[d];return(null===i||void 0===i?void 0:i.loginToken)&&(null===i||void 0===i?void 0:i.loginToken)===n&&((null===i||void 0===i||null===(o=i.extraData)||void 0===o?void 0:o.user_id)||"")===((null===c||void 0===c?void 0:c.user_id)||"")}),[r,a]),i=(0,n.useCallback)((e=>{o("EmbedAppStorage","set",{key:f,value:e})}),[]),u=(0,n.useCallback)((e=>{o("EmbedAppStorage","set",{key:d,value:e})}),[]);var c;return{hasSession:s,setLoginToken:i,getLoginToken:(0,n.useCallback)((()=>null!==(c=r[f])&&void 0!==c?c:a[f]),[r,a]),setAuthExtraData:u}}(),y=function(){const t=(0,e.useHybrid)(),r=(0,e.usePage)();return{getAccessToken:(0,n.useCallback)((()=>{var e,o,n,a,s;return(null===(e=r.query)||void 0===e?void 0:e.embed_platform)?Promise.resolve(null===(o=r.query)||void 0===o?void 0:o[null===(n=r.query)||void 0===n?void 0:n.embed_platform]):null===(s=(a=t.kit).getAccessToken)||void 0===s?void 0:s.call(a)}),[r.query])}}(),x=(0,n.useMemo)((()=>{const e=o.current||b.getLoginToken();return{requireAuth:!r.current,sessionChecking:s,currentAccessToken:e}}),[s,b]),g=(0,n.useMemo)((()=>{let e={};try{e=l.Converter.object.toSnakeCase(_(h.search.replace("?","")))}catch(e){}return e}),[h.search]);return(0,n.useEffect)((()=>{u()(g)||p()(a.current,g)||!(null===x||void 0===x?void 0:x.currentAccessToken)||(c("PartnerAuth","setExtraData",{value:{auth_code:null===x||void 0===x?void 0:x.currentAccessToken,...null===g||void 0===g?void 0:g.extra}}),(null===g||void 0===g?void 0:g.extra)&&b.setAuthExtraData({auth_code:null===x||void 0===x?void 0:x.currentAccessToken,...null===g||void 0===g?void 0:g.extra}),a.current=g)}),[null===x||void 0===x?void 0:x.currentAccessToken,g]),(0,n.useEffect)((()=>{(async()=>{i(!0);const e=await y.getAccessToken();e&&b.setLoginToken(e),o.current=e,r.current=b.hasSession(e,null===g||void 0===g?void 0:g.extra),i(!1)})()}),[h.query.refresh_auth,g]),{extraInfo:x}}const b="EBA_IS_EMBED_APP";var y,x;!function(e){e.mbb="mbb",e.vne="vne"}(y||(y={})),function(e){e.PWA="pwa",e.MBBC2C="mbbc2c",e.VNE="vne"}(x||(x={}));const g=(0,e.Loadable)("@authentication/integration",{ssr:e.LoadableServerMethods.none});const j=function(){const r=function(){const[r]=(0,e.useCookies)(),o=(0,e.useHybrid)(),n=(0,t.useSelector)("EmbedAppStorage").toJS()||{};var a;return{is:e=>{const t=e.toLowerCase();return(o.agent.runtime||"").toLowerCase()===t||r[b]===t||n[b]===t},isEmbedApp:()=>!!r[b]||!!n[b],currentApp:null!==(a=r[b])&&void 0!==a?a:n[b]}}(),{extraInfo:a}=h(),s=(0,n.useMemo)((()=>{switch(r.currentApp){case y.mbb:return x.MBBC2C;case y.vne:return x.VNE;default:return x.PWA}}),[r.currentApp]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(g,{platform:s,extra:a})})},A=(0,e.declareModule)({details:{id:"@authentication/embed",version:"0.91.0",platform:"hybrid"},data:r,component:j})})(),i})()));
//# sourceMappingURL=https://web-static.scdn.vn/authentication-embed/1f180c4c-web/index.js.map